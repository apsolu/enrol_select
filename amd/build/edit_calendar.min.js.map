{"version":3,"file":"edit_calendar.min.js","sources":["../src/edit_calendar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module javascript.\n *\n * @todo       Description à compléter.\n *\n * @module     enrol_select/edit_calendar\n * @copyright  2022 Université Rennes 2 <dsi-contact@univ-rennes2.fr>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([], function() {\n    return {\n        initialise : function(warning){\n            // Récupère le menu déroulant permettant de choisir le calendrier.\n            let calendarselect = document.getElementById('id_customchar1');\n\n            if (!calendarselect) {\n                // Il devrait toujours avoir un menu déroulant pour choisir le calendrier...\n                return;\n            }\n\n            // Récupère la valeur courante du calendrier.\n            const originalvalue = calendarselect.value;\n\n            if (originalvalue == '0') {\n                // Le calendrier n'est pas utilisé. Il ne peut pas avoir un risque de suppression de notes.\n                return;\n            }\n\n            // Place un évènement pour détecter les changements de la valeur du calendrier.\n            calendarselect.addEventListener('change', function(evt) {\n                // Récupère la div Moodle permettant d'afficher les erreurs.\n                let errordiv = document.getElementById('id_error_customchar1');\n\n                if (!errordiv) {\n                    // Il devrait toujours avoir une div Moodle permettant d'afficher les erreurs...\n                    return;\n                }\n\n                if (evt.target.value == originalvalue) {\n                    // La valeur actuelle est identique à la valeur d'origine. On supprime le message d'erreur.\n                    errordiv.textContent = '';\n                    errordiv.style.display = 'None';\n                } else {\n                    // On affiche le message d'erreur pour indiquer le risque de perte de données.\n                    errordiv.textContent = warning;\n                    errordiv.style.display = 'block';\n                }\n            });\n        }\n    };\n});\n"],"names":["define","initialise","warning","calendarselect","document","getElementById","originalvalue","value","addEventListener","evt","errordiv","target","textContent","style","display"],"mappings":";;;;;;;;;AAyBAA,oCAAO,IAAI,iBACA,CACHC,WAAa,SAASC,aAEdC,eAAiBC,SAASC,eAAe,sBAExCF,4BAMCG,cAAgBH,eAAeI,MAEhB,KAAjBD,eAMJH,eAAeK,iBAAiB,UAAU,SAASC,SAE3CC,SAAWN,SAASC,eAAe,wBAElCK,WAKDD,IAAIE,OAAOJ,OAASD,eAEpBI,SAASE,YAAc,GACvBF,SAASG,MAAMC,QAAU,SAGzBJ,SAASE,YAAcV,QACvBQ,SAASG,MAAMC,QAAU"}