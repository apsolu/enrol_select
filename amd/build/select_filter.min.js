/**
 * Module javascript.
 *
 * @todo       Description à compléter.
 *
 * @module     enrol_select/select_filter
 * @copyright  2016 Université Rennes 2 <dsi-contact@univ-rennes2.fr>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("enrol_select/select_filter",["jquery","enrol_select/select2"],(function($){return{initialise:function(){function apsolu_filter(){var rows=$("#apsolu-activities-table tbody tr");rows.css("display","table-row");var selections=$("#apsolu-wishes-filters .select2-selection__clear");0!=selections.length?rows.each((function(){var row=$(this),match=!0;selections.each((function(){if(0!=match){var found=!1;$(this).parent().find(".select2-selection__choice").each((function(){if(0==found){var text=$(this).attr("title"),colname=$(this).parents(":eq(3)").prev().attr("data-column-name"),th=$("#apsolu-activities-table th[data-column="+colname+"]"),colnum=$("#apsolu-activities-table tr th").index(th);row.children().length>=colnum&&(found="role"==colname?row.children().eq(colnum).html().indexOf(text)>-1:"starttime"==colname||"endtime"==colname?row.children().eq(colnum).text().substr(0,3)==text.substr(0,2)+":":"sport"==colname||"location"==colname?row.children().eq(colnum).children().eq(0).text()==text:row.children().eq(colnum).text()==text)}})),0==found&&(match=!1)}})),0==match&&$(this).css("display","none")})):$("#apsolu-activities-table tbody tr th.apsolu-sports-th").each((function(){$(this).css("display","table-cell"),$(this).children("span").hasClass("apsolu-expandable")?$(this).parent().nextUntil(".apsolu-sports-tr-activity").css("display","none"):$(this).children("span").hasClass("apsolu-collapsible")&&$(this).parent().nextUntil(".apsolu-sports-tr-activity").css("display","table-row")}))}$(".filters").each((function(){$(this).select2({width:"100%"}),$(this).on("change.select2",(function(){apsolu_filter()}))})),$("#filters-submit, .apsolu-categories-col").css("display","none"),apsolu_filter(),$("#filters-reset").click((function(){$(".filters").select2("val",""),apsolu_filter(),$(".apsolu-sports-th-span").attr("class","apsolu-sports-th-span apsolu-expandable"),$(".apsolu-sports-th").parent().parent().nextUntil(".apsolu-sports-tr-activity").css("display","none")}))}}}));

//# sourceMappingURL=select_filter.min.js.map