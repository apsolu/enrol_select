{"version":3,"file":"select_manage_user_selection.min.js","sources":["../src/select_manage_user_selection.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module javascript.\n *\n * @todo       Description à compléter.\n *\n * @module     enrol_select/select_manage_user_selection\n * @copyright  2016 Université Rennes 2 <dsi-contact@univ-rennes2.fr>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'local_apsolu/jquery.tablesorter'], function($) {\n    return {\n        initialise: function(semester2) {\n            // Active les premiers sous-onglets (liste des acceptés, liste principale, liste complémentaire, etc).\n            $('.apsolu-manage-users-tab-ul > li:first-child > a').each(function() {\n                $(this).addClass('active show');\n                $(this).attr('aria-selected', 'true');\n                $('#' + $(this).attr('aria-controls')).addClass('active show');\n            });\n\n            // Détermine quel onglet doit être actif au chargement de la page (S1 ou S2).\n            var index;\n            if (semester2 == true) {\n                index = Math.floor($('#apsolu-manage-methods-title-tab-ul > li').length / 2);\n            } else {\n                index = 0;\n            }\n\n            // Active un onglet (semestre 1, semestre 2, etc).\n            var link = $('#apsolu-manage-methods-title-tab-ul > li').eq(index).children().first();\n            link.addClass('active show');\n            link.attr('aria-selected', 'true');\n            $('#' + link.attr('aria-controls')).addClass('active show');\n\n            // Gère les checkboxes permettant de faire des actions sur les utilisateurs sélectionnés.\n            $('.select_options').change(function() {\n                var checkboxes = $(this).parents(':eq(1)').find(\"input[type='checkbox']:checked\");\n                if (checkboxes.length > 0 && $(this).val() !== '') {\n                    $(this).parents(':eq(1)').submit();\n                }\n            });\n\n            // Gère les liens permettant de cocher toutes les checkboxes.\n            $('.checkall').click(function() {\n                var form = $(this).closest('.participants-form');\n                form.find(\"input[type='checkbox']\").prop('checked', true);\n                form.find('select[name=\"actions\"]').prop('disabled', false);\n            });\n\n            // Gère les liens permettant de décocher toutes les checkboxes.\n            $('.uncheckall').click(function() {\n                var form = $(this).closest('.participants-form');\n                form.find(\"input[type='checkbox']\").prop('checked', false);\n                form.find('select[name=\"actions\"]').prop('disabled', true);\n            });\n\n            // Active ou désactive le menu déroulant permettant de faire des actions sur les utilisateurs sélectionnés.\n            $('.apsolu-select-manage-users-input-checkbox').change(function() {\n                var form = $(this).closest('.participants-form');\n                if (form.find(\".apsolu-select-manage-users-input-checkbox:checked\").length == 0) {\n                    form.find('select[name=\"actions\"],input[name=\"send_message\"]').prop('disabled', true);\n                } else {\n                    form.find('select[name=\"actions\"],input[name=\"send_message\"]').prop('disabled', false);\n                }\n            });\n\n            // Désactive par défaut les menus déroulants permettant de faire des actions sur les utilisateurs sélectionnés.\n            $('select[name=\"actions\"]').prop('disabled', true);\n\n            // Ajoute la possiblité de trier les tableaux.\n            $(\".table-sortable\").tablesorter({\n                headers: {\n                    '0': {sorter: false},\n                    '1': {sorter: false}\n                },\n                // Trie chronologiquement la colonne date d'inscription.\n                sortList: [[9, 0]]\n            });\n        }\n    };\n});\n"],"names":["define","$","initialise","semester2","index","each","this","addClass","attr","Math","floor","length","link","eq","children","first","change","parents","find","val","submit","click","form","closest","prop","tablesorter","headers","sorter","sortList"],"mappings":";;;;;;;;;AAyBAA,mDAAO,CAAC,SAAU,oCAAoC,SAASC,SACpD,CACHC,WAAY,SAASC,eASbC,MAPJH,EAAE,oDAAoDI,MAAK,WACvDJ,EAAEK,MAAMC,SAAS,eACjBN,EAAEK,MAAME,KAAK,gBAAiB,QAC9BP,EAAE,IAAMA,EAAEK,MAAME,KAAK,kBAAkBD,SAAS,kBAMhDH,MADa,GAAbD,UACQM,KAAKC,MAAMT,EAAE,4CAA4CU,OAAS,GAElE,MAIRC,KAAOX,EAAE,4CAA4CY,GAAGT,OAAOU,WAAWC,QAC9EH,KAAKL,SAAS,eACdK,KAAKJ,KAAK,gBAAiB,QAC3BP,EAAE,IAAMW,KAAKJ,KAAK,kBAAkBD,SAAS,eAG7CN,EAAE,mBAAmBe,QAAO,WACPf,EAAEK,MAAMW,QAAQ,UAAUC,KAAK,kCACjCP,OAAS,GAAuB,KAAlBV,EAAEK,MAAMa,OACjClB,EAAEK,MAAMW,QAAQ,UAAUG,YAKlCnB,EAAE,aAAaoB,OAAM,eACbC,KAAOrB,EAAEK,MAAMiB,QAAQ,sBAC3BD,KAAKJ,KAAK,0BAA0BM,KAAK,WAAW,GACpDF,KAAKJ,KAAK,0BAA0BM,KAAK,YAAY,MAIzDvB,EAAE,eAAeoB,OAAM,eACfC,KAAOrB,EAAEK,MAAMiB,QAAQ,sBAC3BD,KAAKJ,KAAK,0BAA0BM,KAAK,WAAW,GACpDF,KAAKJ,KAAK,0BAA0BM,KAAK,YAAY,MAIzDvB,EAAE,8CAA8Ce,QAAO,eAC/CM,KAAOrB,EAAEK,MAAMiB,QAAQ,sBACmD,GAA1ED,KAAKJ,KAAK,sDAAsDP,OAChEW,KAAKJ,KAAK,qDAAqDM,KAAK,YAAY,GAEhFF,KAAKJ,KAAK,qDAAqDM,KAAK,YAAY,MAKxFvB,EAAE,0BAA0BuB,KAAK,YAAY,GAG7CvB,EAAE,mBAAmBwB,YAAY,CAC7BC,QAAS,GACA,CAACC,QAAQ,KACT,CAACA,QAAQ,IAGlBC,SAAU,CAAC,CAAC,EAAG"}