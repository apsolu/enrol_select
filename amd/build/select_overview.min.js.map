{"version":3,"file":"select_overview.min.js","sources":["../src/select_overview.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module javascript.\n *\n * @todo       Description à compléter.\n *\n * @module     enrol_select/select_overview\n * @copyright  2016 Université Rennes 2 <dsi-contact@univ-rennes2.fr>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([\"jquery\", \"enrol_select/jquery.popupoverlay\"], function($) {\n    return {\n        initialise: function() {\n            /**\n             * Fonction appelée pour modifier les icônes plier/déplier.\n             *\n             * @param {HTMLElement} th_element Entête de tableau.\n             */\n            function apsolu_overview_set_expandable_icons(th_element) {\n                if ($(th_element).hasClass(\"apsolu-expandable\")) {\n                    $(th_element).attr(\"class\", \"apsolu-collapsible\");\n                } else if ($(th_element).hasClass(\"apsolu-collapsible\")) {\n                    $(th_element).attr(\"class\", \"apsolu-expandable\");\n                } else if ($(th_element).parent().next().css(\"display\") == \"none\") {\n                    $(th_element).attr(\"class\", \"apsolu-expandable\");\n                } else {\n                    $(th_element).attr(\"class\", \"apsolu-collapsible\");\n                }\n            }\n\n            $(\".apsolu-sports-th-span\").click(function() {\n                $(this).parent().parent().nextUntil(\".apsolu-sports-tr\").toggle(\"slow\", \"swing\");\n                apsolu_overview_set_expandable_icons(this);\n            });\n\n            // Si les filtres ne sont pas activés...\n            if ($(\"#apsolu-wishes-filters .select2-selection__clear\").length == 0) {\n                $(\"#apsolu-activities-table tbody tr:not(.apsolu-sports-tr)\").css(\"display\", \"none\");\n            }\n\n            $(\".apsolu-sports-th-span\").each(function() {\n                apsolu_overview_set_expandable_icons(this);\n            });\n\n            // Overlay : http://dev.vast.com/jquery-popup-overlay/.\n            // Affiche la description d'un sport.\n            $('.apsolu-sports-description-info-img').click(function() {\n                var id = $(this).data('popup');\n                var description = $('#' + id);\n\n                description.css({\n                    backgroundColor: '#EEEEEE',\n                    padding: '.5em',\n                    cursor: 'default',\n                    maxWidth: '50%',\n                    textAlign: 'justify'\n                });\n                description.popup('show');\n            });\n\n            // Masque le tableau récapitulatif des voeux.\n            $('#apsolu-rules-summary').css('display', 'none');\n\n            $('#apsolu-rules-summary-a').click(function(evt) {\n                evt.preventDefault();\n\n                $('#apsolu-rules-summary').css({backgroundColor: '#EEEEEE', padding: '.5em', cursor: 'default', maxWidth: '50%'});\n                $('#apsolu-rules-summary').popup('show');\n            });\n        }\n    };\n});\n"],"names":["define","$","initialise","apsolu_overview_set_expandable_icons","th_element","hasClass","attr","parent","next","css","click","this","nextUntil","toggle","length","each","id","data","description","backgroundColor","padding","cursor","maxWidth","textAlign","popup","evt","preventDefault"],"mappings":";;;;;;;;;AAyBAA,sCAAO,CAAC,SAAU,qCAAqC,SAASC,SACrD,CACHC,WAAY,oBAMCC,qCAAqCC,YACtCH,EAAEG,YAAYC,SAAS,qBACvBJ,EAAEG,YAAYE,KAAK,QAAS,sBACrBL,EAAEG,YAAYC,SAAS,uBAEyB,QAAhDJ,EAAEG,YAAYG,SAASC,OAAOC,IAAI,WADzCR,EAAEG,YAAYE,KAAK,QAAS,qBAI5BL,EAAEG,YAAYE,KAAK,QAAS,sBAIpCL,EAAE,0BAA0BS,OAAM,WAC9BT,EAAEU,MAAMJ,SAASA,SAASK,UAAU,qBAAqBC,OAAO,OAAQ,SACxEV,qCAAqCQ,SAI2B,GAAhEV,EAAE,oDAAoDa,QACtDb,EAAE,4DAA4DQ,IAAI,UAAW,QAGjFR,EAAE,0BAA0Bc,MAAK,WAC7BZ,qCAAqCQ,SAKzCV,EAAE,uCAAuCS,OAAM,eACvCM,GAAKf,EAAEU,MAAMM,KAAK,SAClBC,YAAcjB,EAAE,IAAMe,IAE1BE,YAAYT,IAAI,CACZU,gBAAiB,UACjBC,QAAS,OACTC,OAAQ,UACRC,SAAU,MACVC,UAAW,YAEfL,YAAYM,MAAM,WAItBvB,EAAE,yBAAyBQ,IAAI,UAAW,QAE1CR,EAAE,2BAA2BS,OAAM,SAASe,KACxCA,IAAIC,iBAEJzB,EAAE,yBAAyBQ,IAAI,CAACU,gBAAiB,UAAWC,QAAS,OAAQC,OAAQ,UAAWC,SAAU,QAC1GrB,EAAE,yBAAyBuB,MAAM"}