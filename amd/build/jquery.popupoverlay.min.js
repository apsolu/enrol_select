var factory;factory=function($){var scrollbarwidth,opentimer,$window=$(window),options={},zindexvalues=[],lastclicked=[],bodymarginright=null,visiblePopupsArray=[],transitionsupport=null,iOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),methods={_init:function(el){var $el=$(el),options=$el.data("popupoptions");lastclicked[el.id]=!1,zindexvalues[el.id]=0,$el.data("popup-initialized")||($el.attr("data-popup-initialized","true"),methods._initonce(el)),options.autoopen&&setTimeout((function(){methods.show(el,0)}),0)},_initonce:function(el){var $wrapper,css,parent,child,$el=$(el),$body=$("body"),options=$el.data("popupoptions");if(bodymarginright=parseInt($body.css("margin-right"),10),transitionsupport=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,"tooltip"==options.type&&(options.background=!1,options.scrolllock=!1),options.backgroundactive&&(options.background=!1,options.blur=!1,options.scrolllock=!1),options.scrolllock&&void 0===scrollbarwidth&&(child=(parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),scrollbarwidth=child.innerWidth()-child.height(99).innerWidth(),parent.remove()),$el.attr("id")||$el.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),$el.addClass("popup_content"),options.background&&!$("#"+el.id+"_background").length){$body.append('<div id="'+el.id+'_background" class="popup_background"></div>');var $background=$("#"+el.id+"_background");$background.css({opacity:0,visibility:"hidden",backgroundColor:options.color,position:"fixed",top:0,right:0,bottom:0,left:0}),options.setzindex&&!options.autozindex&&$background.css("z-index","100000"),options.transition&&$background.css("transition",options.transition)}$body.append(el),$el.wrap('<div id="'+el.id+'_wrapper" class="popup_wrapper" />'),($wrapper=$("#"+el.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),iOS&&$wrapper.css("cursor","pointer"),"overlay"==options.type&&$wrapper.css("overflow","auto"),$el.css({opacity:0,visibility:"hidden",display:"inline-block"}),options.setzindex&&!options.autozindex&&$wrapper.css("z-index","100001"),options.outline||$el.css("outline","none"),options.transition&&($el.css("transition",options.transition),$wrapper.css("transition",options.transition)),$el.attr("aria-hidden",!0),"overlay"==options.type&&($el.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),css={position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"},options.backgroundactive&&(css.position="absolute",css.height="0",css.overflow="visible"),$wrapper.css(css),$wrapper.append('<div class="popup_align" />'),$(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),$el.attr("role","dialog");var openelement=options.openelement?options.openelement:"."+el.id+"_open";$(openelement).each((function(i,item){$(item).attr("data-popup-ordinal",i),item.id||$(item).attr("id","open_"+parseInt(1e8*Math.random(),10))})),$el.attr("aria-labelledby")||$el.attr("aria-label")||$el.attr("aria-labelledby",$(openelement).attr("id")),"hover"==options.action?(options.keepfocus=!1,$(openelement).on("mouseenter",(function(event){methods.show(el,$(this).data("popup-ordinal"))})),$(openelement).on("mouseleave",(function(event){methods.hide(el)}))):$(document).on("click",openelement,(function(event){event.preventDefault();var ord=$(this).data("popup-ordinal");setTimeout((function(){methods.show(el,ord)}),0)})),options.closebutton&&methods.addclosebutton(el),options.detach?$el.hide().detach():$wrapper.hide()},show:function(el,ordinal){var $el=$(el);if(!$el.data("popup-visible")){$el.data("popup-initialized")||methods._init(el),$el.attr("data-popup-initialized","true");var $body=$("body"),options=$el.data("popupoptions"),$wrapper=$("#"+el.id+"_wrapper"),$background=$("#"+el.id+"_background");if(callback(el,ordinal,options.beforeopen),lastclicked[el.id]=ordinal,setTimeout((function(){visiblePopupsArray.push(el.id)}),0),options.autozindex){for(var elements=document.getElementsByTagName("*"),len=elements.length,maxzindex=0,i=0;i<len;i++){var elementzindex=$(elements[i]).css("z-index");"auto"!==elementzindex&&maxzindex<(elementzindex=parseInt(elementzindex,10))&&(maxzindex=elementzindex)}zindexvalues[el.id]=maxzindex,options.background&&zindexvalues[el.id]>0&&$("#"+el.id+"_background").css({zIndex:zindexvalues[el.id]+1}),zindexvalues[el.id]>0&&$wrapper.css({zIndex:zindexvalues[el.id]+2})}options.detach?($wrapper.prepend(el),$el.show()):$wrapper.show(),opentimer=setTimeout((function(){$wrapper.css({visibility:"visible",opacity:1}),$("html").addClass("popup_visible").addClass("popup_visible_"+el.id),$wrapper.addClass("popup_wrapper_visible")}),20),options.scrolllock&&($body.css("overflow","hidden"),$body.height()>$window.height()&&$body.css("margin-right",bodymarginright+scrollbarwidth)),options.backgroundactive&&$el.css({top:($window.height()-($el.get(0).offsetHeight+parseInt($el.css("margin-top"),10)+parseInt($el.css("margin-bottom"),10)))/2+"px"}),$el.css({visibility:"visible",opacity:1}),options.background&&($background.css({visibility:"visible",opacity:options.opacity}),setTimeout((function(){$background.css({opacity:options.opacity})}),0)),$el.data("popup-visible",!0),methods.reposition(el,ordinal),$el.data("focusedelementbeforepopup",document.activeElement),options.keepfocus&&($el.attr("tabindex",-1),setTimeout((function(){"closebutton"===options.focuselement?$("#"+el.id+" ."+el.id+"_close:first").focus():options.focuselement?$(options.focuselement).focus():$el.focus()}),options.focusdelay)),$(options.pagecontainer).attr("aria-hidden",!0),$el.attr("aria-hidden",!1),callback(el,ordinal,options.onopen),transitionsupport?$wrapper.one("transitionend",(function(){callback(el,ordinal,options.opentransitionend)})):callback(el,ordinal,options.opentransitionend),"tooltip"==options.type&&$(window).on("resize."+el.id,(function(){methods.reposition(el,ordinal)}))}},hide:function(el,outerClick){var popupIdIndex=$.inArray(el.id,visiblePopupsArray);if(-1!==popupIdIndex){opentimer&&clearTimeout(opentimer);var $body=$("body"),$el=$(el),options=$el.data("popupoptions"),$wrapper=$("#"+el.id+"_wrapper"),$background=$("#"+el.id+"_background");$el.data("popup-visible",!1),1===visiblePopupsArray.length?$("html").removeClass("popup_visible").removeClass("popup_visible_"+el.id):$("html").hasClass("popup_visible_"+el.id)&&$("html").removeClass("popup_visible_"+el.id),visiblePopupsArray.splice(popupIdIndex,1),$wrapper.hasClass("popup_wrapper_visible")&&$wrapper.removeClass("popup_wrapper_visible"),options.keepfocus&&!outerClick&&setTimeout((function(){$($el.data("focusedelementbeforepopup")).is(":visible")&&$el.data("focusedelementbeforepopup").focus()}),0),$wrapper.css({visibility:"hidden",opacity:0}),$el.css({visibility:"hidden",opacity:0}),options.background&&$background.css({visibility:"hidden",opacity:0}),$(options.pagecontainer).attr("aria-hidden",!1),$el.attr("aria-hidden",!0),callback(el,lastclicked[el.id],options.onclose),transitionsupport&&"0s"!==$el.css("transition-duration")?$el.one("transitionend",(function(e){$el.data("popup-visible")||(options.detach?$el.hide().detach():$wrapper.hide()),options.scrolllock&&setTimeout((function(){$body.css({overflow:"visible","margin-right":bodymarginright})}),10),callback(el,lastclicked[el.id],options.closetransitionend)})):(options.detach?$el.hide().detach():$wrapper.hide(),options.scrolllock&&setTimeout((function(){$body.css({overflow:"visible","margin-right":bodymarginright})}),10),callback(el,lastclicked[el.id],options.closetransitionend)),"tooltip"==options.type&&$(window).off("resize."+el.id)}},toggle:function(el,ordinal){$(el).data("popup-visible")?methods.hide(el):setTimeout((function(){methods.show(el,ordinal)}),0)},reposition:function(el,ordinal){var $el=$(el),options=$el.data("popupoptions"),$wrapper=$("#"+el.id+"_wrapper");if($("#"+el.id+"_background"),ordinal=ordinal||0,"tooltip"==options.type){var $tooltipanchor;$wrapper.css({position:"absolute"});var linkOffset=($tooltipanchor=options.tooltipanchor?$(options.tooltipanchor):options.openelement?$(options.openelement).filter('[data-popup-ordinal="'+ordinal+'"]'):$("."+el.id+'_open[data-popup-ordinal="'+ordinal+'"]')).offset();"right"==options.horizontal?$wrapper.css("left",linkOffset.left+$tooltipanchor.outerWidth()+options.offsetleft):"leftedge"==options.horizontal?$wrapper.css("left",linkOffset.left+$tooltipanchor.outerWidth()-$tooltipanchor.outerWidth()+options.offsetleft):"left"==options.horizontal?$wrapper.css("right",$window.width()-linkOffset.left-options.offsetleft):"rightedge"==options.horizontal?$wrapper.css("right",$window.width()-linkOffset.left-$tooltipanchor.outerWidth()-options.offsetleft):$wrapper.css("left",linkOffset.left+$tooltipanchor.outerWidth()/2-$el.outerWidth()/2-parseFloat($el.css("marginLeft"))+options.offsetleft),"bottom"==options.vertical?$wrapper.css("top",linkOffset.top+$tooltipanchor.outerHeight()+options.offsettop):"bottomedge"==options.vertical?$wrapper.css("top",linkOffset.top+$tooltipanchor.outerHeight()-$el.outerHeight()+options.offsettop):"top"==options.vertical?$wrapper.css("bottom",$window.height()-linkOffset.top-options.offsettop):"topedge"==options.vertical?$wrapper.css("bottom",$window.height()-linkOffset.top-$el.outerHeight()-options.offsettop):$wrapper.css("top",linkOffset.top+$tooltipanchor.outerHeight()/2-$el.outerHeight()/2-parseFloat($el.css("marginTop"))+options.offsettop)}else"overlay"==options.type&&(options.horizontal?$wrapper.css("text-align",options.horizontal):$wrapper.css("text-align","center"),options.vertical?$el.css("vertical-align",options.vertical):$el.css("vertical-align","middle"))},addclosebutton:function(el){var genericCloseButton;genericCloseButton=$(el).data("popupoptions").closebuttonmarkup?$(options.closebuttonmarkup).addClass(el.id+"_close"):'<button class="popup_close '+el.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">Ã—</span></button>',$(el).data("popup-initialized")&&$(el).append(genericCloseButton)}},callback=function(el,ordinal,func){var options=$(el).data("popupoptions"),openelement=options.openelement?options.openelement:"."+el.id+"_open",elementclicked=$(openelement+'[data-popup-ordinal="'+ordinal+'"]');"function"==typeof func&&func.call($(el),el,elementclicked)};$(document).on("keydown",(function(event){if(visiblePopupsArray.length){var elementId=visiblePopupsArray[visiblePopupsArray.length-1],el=document.getElementById(elementId);$(el).data("popupoptions").escape&&27==event.keyCode&&methods.hide(el)}})),$(document).on("click",(function(event){if(visiblePopupsArray.length){var elementId=visiblePopupsArray[visiblePopupsArray.length-1],el=document.getElementById(elementId),closeButton=$(el).data("popupoptions").closeelement?$(el).data("popupoptions").closeelement:"."+el.id+"_close";$(event.target).closest(closeButton).length&&(event.preventDefault(),methods.hide(el)),$(el).data("popupoptions").blur&&!$(event.target).closest("#"+elementId).length&&2!==event.which&&$(event.target).is(":visible")&&($(el).data("popupoptions").background?(methods.hide(el),event.preventDefault()):methods.hide(el,!0))}})),$(document).on("keydown",(function(event){if(visiblePopupsArray.length&&9==event.which){var elementId=visiblePopupsArray[visiblePopupsArray.length-1],el=document.getElementById(elementId),focusableItems=$(el).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),focusedItem=$(":focus"),numberOfFocusableItems=focusableItems.length,focusedItemIndex=focusableItems.index(focusedItem);0===numberOfFocusableItems?($(el).focus(),event.preventDefault()):event.shiftKey?0===focusedItemIndex&&(focusableItems.get(numberOfFocusableItems-1).focus(),event.preventDefault()):focusedItemIndex==numberOfFocusableItems-1&&(focusableItems.get(0).focus(),event.preventDefault())}})),$.fn.popup=function(customoptions){return this.each((function(){var $el=$(this);if("object"==typeof customoptions){var opt=$.extend({},$.fn.popup.defaults,$el.data("popupoptions"),customoptions);$el.data("popupoptions",opt),options=$el.data("popupoptions"),methods._init(this)}else"string"==typeof customoptions?($el.data("popupoptions")||($el.data("popupoptions",$.fn.popup.defaults),options=$el.data("popupoptions")),methods[customoptions].call(this,this)):($el.data("popupoptions")||($el.data("popupoptions",$.fn.popup.defaults),options=$el.data("popupoptions")),methods._init(this))}))},$.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,backgroundactive:!1,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}},"function"==typeof define&&define.amd?define("enrol_select/jquery.popupoverlay",["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery){return void 0===jQuery&&(jQuery="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery),jQuery}:factory(jQuery);

//# sourceMappingURL=jquery.popupoverlay.min.js.map